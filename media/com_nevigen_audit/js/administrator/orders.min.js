(()=>{"use strict";window.NevigenAuditOrders={changeStatus:(e,t,r,d)=>{let a=document.querySelector('select[name="select_status_id['+e+']"]'),n=document.querySelector('input[name="order_check_id['+e+']"]'),o=document.querySelector("form#adminForm");if(o&&a){let u=parseInt(a.value);if((t=parseInt(t))===u)return alert(r),!1;let i=document.createElement("input");i.type="hidden",i.name="update_status[order_id]",i.value=e,o.appendChild(i);let s=document.createElement("input");s.type="hidden",s.name="update_status[order_status_old]",s.value=t,o.appendChild(s);let l=document.createElement("input");if(l.type="hidden",l.name="update_status[order_status]",l.value=u,o.appendChild(l),n&&n.checked||d){let e=document.createElement("input");e.type="hidden",e.name="update_status[notify]",e.value=1,o.appendChild(e)}Joomla.submitbutton("orders.updateStatus")}},orderQuickView:(e,t)=>{if(!e||!t)return;let r=document.querySelector('[data-order-quick-view-box="'+e+'"]');if(r)return void(r.style.display="");let d=new FormData;d.set("id",e),window.NevigenAuditOrders.sendAjax("orderQuickView",d).then(e=>{e.data&&t.insertAdjacentHTML("afterend",e.data)}).catch(()=>{})},sendAjax:(e,t)=>new Promise((r,d)=>{if(!t||!e)return d("Error ajax data"),!1;t.set("task","orders."+e);let a=document.querySelector("#adminForm");if(!a)return d("Error get form action"),!1;Joomla.request({url:a.getAttribute("action"),method:"POST",data:t,onSuccess:e=>{let t;try{t=JSON.parse(e)}catch(e){throw Error("Failed to parse JSON")}t&&!0===t.success?r(t):d(t)},onError:e=>{let t;try{t=JSON.parse(e.response)}catch(e){throw Error("Failed to parse JSON")}d(t)}})})},document.addEventListener("DOMContentLoaded",()=>{let e=document.querySelectorAll("[data-order-quick-view]");e.length>0&&e.forEach(e=>{let t=e.getAttribute("data-order-quick-view");t&&(e.addEventListener("mouseenter",()=>{window.NevigenAuditOrders.orderQuickView(t,e)}),e.addEventListener("mouseleave",()=>{let e=document.querySelectorAll("[data-order-quick-view-box]");e.length>0&&e.forEach(e=>{e.style.display="none"})}))})})})();