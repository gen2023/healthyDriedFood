/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/*!********************************************************!*\
  !*** ./com_nevigen_audit/es6/administrator/orders.es6 ***!
  \********************************************************/
/*
 * @package    Nevigen Audit Package
 * @version    1.2.0
 * @author     Nevigen.com - https://nevigen.com
 * @copyright  Copyright Â© Nevigen.com. All rights reserved.
 * @license    Proprietary. Copyrighted Commercial Software
 * @link       https://nevigen.com
 */



window.NevigenAuditOrders = {
  changeStatus: (orderId, oldStatus, message, notify) => {
    let selectStatus = document.querySelector('select[name="select_status_id[' + orderId + ']"]'),
      inputNotify = document.querySelector('input[name="order_check_id[' + orderId + ']"]'),
      form = document.querySelector('form#adminForm');
    if (form && selectStatus) {
      let newStatus = parseInt(selectStatus.value);
      oldStatus = parseInt(oldStatus);
      if (oldStatus === newStatus) {
        alert(message);
        return false;
      }
      let inputOrderId = document.createElement('input');
      inputOrderId.type = 'hidden';
      inputOrderId.name = 'update_status[order_id]';
      inputOrderId.value = orderId;
      form.appendChild(inputOrderId);
      let inputOrderStatusOld = document.createElement('input');
      inputOrderStatusOld.type = 'hidden';
      inputOrderStatusOld.name = 'update_status[order_status_old]';
      inputOrderStatusOld.value = oldStatus;
      form.appendChild(inputOrderStatusOld);
      let inputOrderStatus = document.createElement('input');
      inputOrderStatus.type = 'hidden';
      inputOrderStatus.name = 'update_status[order_status]';
      inputOrderStatus.value = newStatus;
      form.appendChild(inputOrderStatus);
      if (inputNotify && inputNotify.checked || notify) {
        let inputNotify = document.createElement('input');
        inputNotify.type = 'hidden';
        inputNotify.name = 'update_status[notify]';
        inputNotify.value = 1;
        form.appendChild(inputNotify);
      }
      Joomla.submitbutton('orders.updateStatus');
    }
  },
  orderQuickView: (orderId, btn) => {
    if (!orderId || !btn) {
      return;
    }
    let box = document.querySelector('[data-order-quick-view-box="' + orderId + '"]');
    if (box) {
      box.style.display = '';
      return;
    }
    let ajaxData = new FormData();
    ajaxData.set('id', orderId);
    window.NevigenAuditOrders.sendAjax('orderQuickView', ajaxData).then(response => {
      if (response.data) {
        btn.insertAdjacentHTML('afterend', response.data);
      }
    }).catch(error => {
      console.error(error.message);
    });
  },
  sendAjax: (method, ajaxData) => {
    return new Promise((resolve, reject) => {
      if (!ajaxData || !method) {
        reject('Error ajax data');
        return false;
      }
      ajaxData.set('task', 'orders.' + method);
      let form = document.querySelector('#adminForm');
      if (!form) {
        reject('Error get form action');
        return false;
      }
      Joomla.request({
        url: form.getAttribute('action'),
        method: 'POST',
        data: ajaxData,
        onSuccess: resp => {
          let response;
          try {
            response = JSON.parse(resp);
          } catch (error) {
            throw new Error('Failed to parse JSON');
          }
          if (response && response.success === true) {
            resolve(response);
          } else {
            reject(response);
          }
        },
        onError: resp => {
          let response;
          try {
            response = JSON.parse(resp.response);
          } catch (error) {
            throw new Error('Failed to parse JSON');
          }
          reject(response);
        }
      });
    });
  }
};
document.addEventListener('DOMContentLoaded', () => {
  let orderQuickView = document.querySelectorAll('[data-order-quick-view]');
  if (orderQuickView.length > 0) {
    orderQuickView.forEach(btn => {
      let id = btn.getAttribute('data-order-quick-view');
      if (id) {
        btn.addEventListener('mouseenter', e => {
          window.NevigenAuditOrders.orderQuickView(id, btn);
        });
        btn.addEventListener('mouseleave', () => {
          let boxes = document.querySelectorAll('[data-order-quick-view-box]');
          if (boxes.length > 0) {
            boxes.forEach(box => {
              box.style.display = 'none';
            });
          }
        });
      }
    });
  }
});
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQUdLLENBQUMsSUFBSztVQUN6QzdELE1BQU0sQ0FBQ0Msa0JBQWtCLENBQUN5QixjQUFjLENBQUNrQyxFQUFFLEVBQUVqQyxHQUFHLENBQUM7UUFDbEQsQ0FBQyxDQUFDO1FBRUZBLEdBQUcsQ0FBQzZCLGdCQUFnQixDQUFDLFlBQVksRUFBRSxNQUFNO1VBQ3hDLElBQUlNLEtBQUssR0FBR3RELFFBQVEsQ0FBQ2lELGdCQUFnQixDQUFDLDZCQUE2QixDQUFDO1VBQ3BFLElBQUlLLEtBQUssQ0FBQ0osTUFBTSxHQUFHLENBQUMsRUFBRTtZQUNyQkksS0FBSyxDQUFDSCxPQUFPLENBQUMvQixHQUFHLElBQUk7Y0FDcEJBLEdBQUcsQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLEdBQUcsTUFBTTtZQUMzQixDQUFDLENBQUM7VUFDSDtRQUNELENBQUMsQ0FBQztNQUNIO0lBQ0QsQ0FBQyxDQUFDO0VBQ0g7QUFDRCxDQUFDLENBQUMsQyIsInNvdXJjZXMiOlsid2VicGFjazovL3BrZ19uZXZpZ2VuX2F1ZGl0Ly4vY29tX25ldmlnZW5fYXVkaXQvZXM2L2FkbWluaXN0cmF0b3Ivb3JkZXJzLmVzNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKlxuICogQHBhY2thZ2UgICAgTmV2aWdlbiBBdWRpdCBQYWNrYWdlXG4gKiBAdmVyc2lvbiAgICAxLjIuMFxuICogQGF1dGhvciAgICAgTmV2aWdlbi5jb20gLSBodHRwczovL25ldmlnZW4uY29tXG4gKiBAY29weXJpZ2h0ICBDb3B5cmlnaHQgwqkgTmV2aWdlbi5jb20uIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBAbGljZW5zZSAgICBQcm9wcmlldGFyeS4gQ29weXJpZ2h0ZWQgQ29tbWVyY2lhbCBTb2Z0d2FyZVxuICogQGxpbmsgICAgICAgaHR0cHM6Ly9uZXZpZ2VuLmNvbVxuICovXG5cblwidXNlIHN0cmljdFwiO1xuXG5cbndpbmRvdy5OZXZpZ2VuQXVkaXRPcmRlcnMgPSB7XG5cdGNoYW5nZVN0YXR1czogKG9yZGVySWQsIG9sZFN0YXR1cywgbWVzc2FnZSwgbm90aWZ5KSA9PiB7XG5cdFx0bGV0IHNlbGVjdFN0YXR1cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdFtuYW1lPVwic2VsZWN0X3N0YXR1c19pZFsnICsgb3JkZXJJZCArICddXCJdJyksXG5cdFx0XHRpbnB1dE5vdGlmeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJvcmRlcl9jaGVja19pZFsnICsgb3JkZXJJZCArICddXCJdJyksXG5cdFx0XHRmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybSNhZG1pbkZvcm0nKTtcblx0XHRpZiAoZm9ybSAmJiBzZWxlY3RTdGF0dXMpIHtcblx0XHRcdGxldCBuZXdTdGF0dXMgPSBwYXJzZUludChzZWxlY3RTdGF0dXMudmFsdWUpO1xuXHRcdFx0b2xkU3RhdHVzID0gcGFyc2VJbnQob2xkU3RhdHVzKTtcblx0XHRcdGlmIChvbGRTdGF0dXMgPT09IG5ld1N0YXR1cykge1xuXHRcdFx0XHRhbGVydChtZXNzYWdlKTtcblxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHRsZXQgaW5wdXRPcmRlcklkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcblx0XHRcdGlucHV0T3JkZXJJZC50eXBlID0gJ2hpZGRlbic7XG5cdFx0XHRpbnB1dE9yZGVySWQubmFtZSA9ICd1cGRhdGVfc3RhdHVzW29yZGVyX2lkXSc7XG5cdFx0XHRpbnB1dE9yZGVySWQudmFsdWUgPSBvcmRlcklkO1xuXHRcdFx0Zm9ybS5hcHBlbmRDaGlsZChpbnB1dE9yZGVySWQpO1xuXG5cdFx0XHRsZXQgaW5wdXRPcmRlclN0YXR1c09sZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cdFx0XHRpbnB1dE9yZGVyU3RhdHVzT2xkLnR5cGUgPSAnaGlkZGVuJztcblx0XHRcdGlucHV0T3JkZXJTdGF0dXNPbGQubmFtZSA9ICd1cGRhdGVfc3RhdHVzW29yZGVyX3N0YXR1c19vbGRdJztcblx0XHRcdGlucHV0T3JkZXJTdGF0dXNPbGQudmFsdWUgPSBvbGRTdGF0dXM7XG5cdFx0XHRmb3JtLmFwcGVuZENoaWxkKGlucHV0T3JkZXJTdGF0dXNPbGQpO1xuXG5cdFx0XHRsZXQgaW5wdXRPcmRlclN0YXR1cyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cdFx0XHRpbnB1dE9yZGVyU3RhdHVzLnR5cGUgPSAnaGlkZGVuJztcblx0XHRcdGlucHV0T3JkZXJTdGF0dXMubmFtZSA9ICd1cGRhdGVfc3RhdHVzW29yZGVyX3N0YXR1c10nO1xuXHRcdFx0aW5wdXRPcmRlclN0YXR1cy52YWx1ZSA9IG5ld1N0YXR1cztcblx0XHRcdGZvcm0uYXBwZW5kQ2hpbGQoaW5wdXRPcmRlclN0YXR1cyk7XG5cblx0XHRcdGlmICgoaW5wdXROb3RpZnkgJiYgaW5wdXROb3RpZnkuY2hlY2tlZCkgfHwgbm90aWZ5KSB7XG5cdFx0XHRcdGxldCBpbnB1dE5vdGlmeSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG5cdFx0XHRcdGlucHV0Tm90aWZ5LnR5cGUgPSAnaGlkZGVuJztcblx0XHRcdFx0aW5wdXROb3RpZnkubmFtZSA9ICd1cGRhdGVfc3RhdHVzW25vdGlmeV0nO1xuXHRcdFx0XHRpbnB1dE5vdGlmeS52YWx1ZSA9IDE7XG5cdFx0XHRcdGZvcm0uYXBwZW5kQ2hpbGQoaW5wdXROb3RpZnkpO1xuXHRcdFx0fVxuXG5cdFx0XHRKb29tbGEuc3VibWl0YnV0dG9uKCdvcmRlcnMudXBkYXRlU3RhdHVzJyk7XG5cblxuXHRcdH1cblx0fSxcblx0b3JkZXJRdWlja1ZpZXc6IChvcmRlcklkLCBidG4pID0+IHtcblx0XHRpZiAoIW9yZGVySWQgfHwgIWJ0bikge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRsZXQgYm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtb3JkZXItcXVpY2stdmlldy1ib3g9XCInICsgb3JkZXJJZCArICdcIl0nKTtcblx0XHRpZiAoYm94KSB7XG5cdFx0XHRib3guc3R5bGUuZGlzcGxheSA9ICcnO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXG5cdFx0bGV0IGFqYXhEYXRhID0gbmV3IEZvcm1EYXRhKCk7XG5cdFx0YWpheERhdGEuc2V0KCdpZCcsIG9yZGVySWQpO1xuXHRcdHdpbmRvdy5OZXZpZ2VuQXVkaXRPcmRlcnMuc2VuZEFqYXgoJ29yZGVyUXVpY2tWaWV3JywgYWpheERhdGEpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG5cdFx0XHRpZiAocmVzcG9uc2UuZGF0YSkge1xuXHRcdFx0XHRidG4uaW5zZXJ0QWRqYWNlbnRIVE1MKCdhZnRlcmVuZCcsIHJlc3BvbnNlLmRhdGEpO1xuXHRcdFx0fVxuXHRcdH0pLmNhdGNoKChlcnJvcikgPT4ge1xuXHRcdFx0Y29uc29sZS5lcnJvcihlcnJvci5tZXNzYWdlKTtcblx0XHR9KTtcblxuXHR9LFxuXHRzZW5kQWpheDogKG1ldGhvZCwgYWpheERhdGEpID0+IHtcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuXHRcdFx0XHRpZiAoIWFqYXhEYXRhIHx8ICFtZXRob2QpIHtcblx0XHRcdFx0XHRyZWplY3QoJ0Vycm9yIGFqYXggZGF0YScpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGFqYXhEYXRhLnNldCgndGFzaycsICdvcmRlcnMuJyArIG1ldGhvZCk7XG5cdFx0XHRcdGxldCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2FkbWluRm9ybScpO1xuXHRcdFx0XHRpZiAoIWZvcm0pIHtcblx0XHRcdFx0XHRyZWplY3QoJ0Vycm9yIGdldCBmb3JtIGFjdGlvbicpO1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdEpvb21sYS5yZXF1ZXN0KHtcblx0XHRcdFx0XHR1cmw6IGZvcm0uZ2V0QXR0cmlidXRlKCdhY3Rpb24nKSxcblx0XHRcdFx0XHRtZXRob2Q6ICdQT1NUJyxcblx0XHRcdFx0XHRkYXRhOiBhamF4RGF0YSxcblx0XHRcdFx0XHRvblN1Y2Nlc3M6IHJlc3AgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IHJlc3BvbnNlO1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBKU09OLnBhcnNlKHJlc3ApO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcGFyc2UgSlNPTicpO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAocmVzcG9uc2UgJiYgcmVzcG9uc2Uuc3VjY2VzcyA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKHJlc3BvbnNlKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHJlamVjdChyZXNwb25zZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRvbkVycm9yOiByZXNwID0+IHtcblx0XHRcdFx0XHRcdGxldCByZXNwb25zZTtcblx0XHRcdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlID0gSlNPTi5wYXJzZShyZXNwLnJlc3BvbnNlKTtcblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIHBhcnNlIEpTT04nKTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0cmVqZWN0KHJlc3BvbnNlKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdClcblx0fSxcbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcblx0bGV0IG9yZGVyUXVpY2tWaWV3ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtb3JkZXItcXVpY2stdmlld10nKVxuXHRpZiAob3JkZXJRdWlja1ZpZXcubGVuZ3RoID4gMCkge1xuXHRcdG9yZGVyUXVpY2tWaWV3LmZvckVhY2goKGJ0bikgPT4ge1xuXHRcdFx0bGV0IGlkID0gYnRuLmdldEF0dHJpYnV0ZSgnZGF0YS1vcmRlci1xdWljay12aWV3Jyk7XG5cdFx0XHRpZiAoaWQpIHtcblx0XHRcdFx0YnRuLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoZSkgPT4ge1xuXHRcdFx0XHRcdHdpbmRvdy5OZXZpZ2VuQXVkaXRPcmRlcnMub3JkZXJRdWlja1ZpZXcoaWQsIGJ0bik7XG5cdFx0XHRcdH0pO1xuXG5cdFx0XHRcdGJ0bi5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xuXHRcdFx0XHRcdGxldCBib3hlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLW9yZGVyLXF1aWNrLXZpZXctYm94XScpO1xuXHRcdFx0XHRcdGlmIChib3hlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdFx0XHRib3hlcy5mb3JFYWNoKGJveCA9PiB7XG5cdFx0XHRcdFx0XHRcdGJveC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59KTtcbiJdLCJuYW1lcyI6WyJ3aW5kb3ciLCJOZXZpZ2VuQXVkaXRPcmRlcnMiLCJjaGFuZ2VTdGF0dXMiLCJvcmRlcklkIiwib2xkU3RhdHVzIiwibWVzc2FnZSIsIm5vdGlmeSIsInNlbGVjdFN0YXR1cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImlucHV0Tm90aWZ5IiwiZm9ybSIsIm5ld1N0YXR1cyIsInBhcnNlSW50IiwidmFsdWUiLCJhbGVydCIsImlucHV0T3JkZXJJZCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwibmFtZSIsImFwcGVuZENoaWxkIiwiaW5wdXRPcmRlclN0YXR1c09sZCIsImlucHV0T3JkZXJTdGF0dXMiLCJjaGVja2VkIiwiSm9vbWxhIiwic3VibWl0YnV0dG9uIiwib3JkZXJRdWlja1ZpZXciLCJidG4iLCJib3giLCJzdHlsZSIsImRpc3BsYXkiLCJhamF4RGF0YSIsIkZvcm1EYXRhIiwic2V0Iiwic2VuZEFqYXgiLCJ0aGVuIiwicmVzcG9uc2UiLCJkYXRhIiwiaW5zZXJ0QWRqYWNlbnRIVE1MIiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJtZXRob2QiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlcXVlc3QiLCJ1cmwiLCJnZXRBdHRyaWJ1dGUiLCJvblN1Y2Nlc3MiLCJyZXNwIiwiSlNPTiIsInBhcnNlIiwiRXJyb3IiLCJzdWNjZXNzIiwib25FcnJvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJxdWVyeVNlbGVjdG9yQWxsIiwibGVuZ3RoIiwiZm9yRWFjaCIsImlkIiwiZSIsImJveGVzIl0sInNvdXJjZVJvb3QiOiIifQ==